<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examples of Asyncronous</title>
</head>
<body>  
    <script>
        
        // Promise Chaining
        function firstTask() {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    console.log("call firstTask");
                    resolve("첫번째 결과");                    
                }, 1000);
            })
        }
        
        function secondTask(result) { // result는 firstTask 결과 
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    console.log(`call secondTask, 이전 결과 : ${result}`);
                    resolve("두번째 결과");                    
                }, 1000);
            })
        }

        function thirdTask(result) { // result는 secondTask 결과
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    console.log(`call thirdTask, 이전 결과 : ${result}`);
                    resolve("세번째 결과");                    
                }, 1000);
            })
        }

        const runTask = async () => {
            try {
                const result1 = await firstTask();          // ⬅ 함수 호출      call firstTask
                const result2 = await secondTask(result1);  // ⬅ 두 번째 함수   call secondTask, 이전 결과 : 첫번째 결과
                const result3 = await thirdTask(result2);   // ⬅ 세 번째 함수   call thirdTask, 이전 결과 : 두번째 결과

                console.log("최종 결과 : ", result3);         // ⬅ 출력         최종 결과 :  세번째 결과
            } catch (error) {
                console.log("error : ", error);
            }
        };

        runTask();
        
    </script>
</body>
</html>